# 思维导图可视化工具 (Mind Map Visualization Tool)

这是一个基于Web的交互式思维导图和流程图工具。它允许用户动态地创建、连接和编辑节点，形成复杂的图表结构。该项目使用纯JavaScript、HTML/SVG和CSS构建前端，并由一个轻量级的Flask (Python) 后端提供项目文件的保存和加载功能。

## 功能特性

- **动态节点创建与编辑**:
  - 在画布任意位置双击即可创建新节点。
  - 双击节点的标题或简介区域可直接进行文本编辑。
  - 可通过拖动右下角的句柄来调整节点的大小。

- **灵活的连线系统**:
  - 支持在节点之间创建有向箭头连线。
  - 双击连线可以为其添加和编辑文字标签。
  - 支持拖动连线标签，以微调其显示位置。
  - 连线会自动避开节点，并以平滑的曲线展示。

- **丰富的交互体验**:
  - **平移与缩放**: 按住并在画布空白处拖动可平移画布。按住 `Ctrl` 并滚动鼠标滚轮可进行缩放。
  - **复制与粘贴**: 选中一个节点，按 `Ctrl+C` 可复制该节点及其所有下游子节点（整个分支）。按 `Ctrl+V` 可在当前鼠标位置粘贴整个分支。
  - **撤销与重做**: 支持多步撤销 (`Ctrl+Z`) 和重做 (`Ctrl+Y`)。
  - **聚焦模式**: 选中一个节点后，点击其右上角的 "F" 按钮，可以高亮其所有上游父节点和下游子节点，帮助用户专注于特定分支。

- **项目管理**:
  - **保存与加载**: 可将当前画布状态保存为 `.json` 文件，并随时从左侧面板加载。
  - **文件夹系统**: 支持在项目保存区创建文件夹，以更好地组织和管理不同的思维导图。
  - **自动保存**: 在编辑过程中，应用会自动进行保存，防止意外丢失工作（最多保留3个自动保存文件）。
  - **导出**: 可将当前视图导出为一个独立的、可交互的 `.html` 文件，方便分享和展示。

## 技术栈

- **前端**: HTML, CSS, JavaScript (ES6+), SVG
- **后端**: Python, Flask, Flask-CORS
- **核心原理**:
  - 节点和连线的渲染完全基于DOM和SVG元素，不依赖任何外部图形库。
  - 节点的拖动、缩放、连线和标签的定位都是通过JavaScript实时计算和更新CSS/SVG属性实现的。
  - 用户操作历史记录被保存在一个数组中，以实现撤销和重做功能。
  - 后端使用Flask提供RESTful API接口，用于处理文件的创建、读取、更新和删除 (CRUD) 操作。
  - 使用Flask-CORS处理跨域请求，确保前后端通信顺畅。

## 如何运行

1.  确保你的环境中已经安装了 Python。然后安装所需依赖:
    ```bash
    pip install Flask Flask-CORS
    ```
2.  在项目根目录下，运行后端服务:
    ```bash
    python app.py
    ```
3.  应用启动后，它会自动在你的默认浏览器中打开 `http://127.0.0.1:5000/`。
4.  开始使用！所有的项目文件都会被保存在 `saved_maps` 文件夹中。

## 安全特性

- 文件操作安全性：
  - 防止目录遍历攻击（禁止使用 '..' 和绝对路径）
  - 文件名和路径验证
  - 安全的文件夹创建和删除机制（空文件夹才能删除）
  - 自动保存文件数量限制（最多保留3个自动保存文件）

## 项目结构

```
siweidaotu/
  ├── app.py              # Flask后端主程序
  ├── requirements.txt    # Python依赖文件
  ├── templates/          # 前端模板文件
  │   └── index.html     # 主页面
  └── saved_maps/        # 保存的思维导图文件
      └── text/          # 示例文件夹
``` 
